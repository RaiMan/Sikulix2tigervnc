language: java
jdk: oraclejdk8

env:
  global:
    - secure: bols/38wdGmWOVxoyzSG6GYosfrtPXkKPz3hrHHUYcTkAs5R2afPecWJBpCQGNeci1CIqOoIEhd0Xr6n+2OssUbDTDOVCj99IgNHmYvIctwtnep1ZYefXyhosw6cqKq586Ru+mbg9tWpA81ym21cX/3IEQpK9T3reFibgRmuB3dRWfFC6hk7ruQQiqorPwm3l1dBFrn4ANn+DvJZRw0JYklLkNE11mh8Pb0ugH5EEhDanTZrcv+OpirL9gdSJlmTc0v91SNYoD9CHx212VCtRlZg4l5ZVhZUI7/pb0tqUokM/TlSO90KkOhOageSC2C/dZFZ6QtyzflmAz4hKNcXflyb9pN3kQJr+kEW1Og2mqtg2m2irpxYtKRliOxhIHGdSAY5YWU+DZkEDQEtjOTjXNTs2m7q7tM4oYJj9FX/74S9NiTzQFEhroC01mfNZpnsglJa4ynCdP7W7rMe3BcBGa/6kfu796dprlG72m/4RQ+wnuxcdk6YpLVLr2c0hG6CYBJACNnTJG1VF7/c6jPbZCz57hKCQoPMokREu6F9aScSSL0q4tEifVirdF6mwAS/3TjlDWdtYA4sLh3p7D3gH6o3JwCZ4CknHti8RxBfwrWH1BtXGpvcxttYyfbHPiPp4XAnQHc4amC81/aeiw9NtGNeWhY6vxhfDti3LRHj/68=
    - secure: qClrNkYKcs76m74I6XUPVZPzPdD2uHR0LvPjhWlNWMRIvV6PLAoyH/xph67pOLIcufI+idfAZSJ7bKc7nz8EsMya1N6GwfyfLabAjED7eWxAnFv9B2x++lNX9ONafmhRgbjIA7UGGI1oZuE6dA2piUUNTv1WMRhzSOw8w22Iq+67zieaCmXSXXb89ApFVIZCBg11BY34wgYPF8cOQ7v85t8HHxEpEeUoEunXnoChq3k/fRE06x+6xTZ1esdFhZZW1yXDIvhbXqYGUGR5lxjbBLiH0aVFzs+Mg/IdOa1Rze24v8diZLRYwboT9thDQxGvjMzdYDi20W29TSlWJhMdHiPutNNGADCm2xBteHUPMLni7tRguAAXwAW1UjFjkmsRT9s7uVgvTNamH0X8ZCZ0N0DMI5rwlkeHOZJT/3dPy9Vkz2/MqUcusjgsF/lk1rt09Wwpg+pv1goczM+Y7J0CMjZZor4sk9xR3j0L8/JM3rUyJoylGLEY1WzOGLNSPrmik3CueJEXWXEjhBAZenC57An/XmibCzAU6Ovky8CGztxJQp9oXs/nkcH7uDq/CMB7fnG+PaLn/WwGzDbiiRIkUaDBoj1f3z7m6+cgqcTs5Qe5DzdVql4BP9HsDqfzn6Q0sdPlgjROxah/WAFU07wo8TF7ikJPJjI/ozoMqJR5QME=
    - secure: HW4RYI+nVkM54UPxta7hUDZXXmsajZJNyVc0SqRIfwHvGVGesJLNOL7++8VwEVz120FbZcG5OdDM+/L7pcTXDQP93mCZEHiUGsoYPnsqFX1I83IzEnQZmnaeBqt1MZWPExxIY5D+TeVpBR97YAeiOqGRbGcvBcEa+/DOQcZABJLdQZ9Htq6PX82VuIzc4M4/bVJizPdglKB5eRLiOU3GwWJcMEjnOusTmrnpDl50oKff0AvT7g4JTkso8/UShc9HPZiiqUYhVutSKdLdr8CrbxP7ngsrtEhQsn9L+PrePLzO+z7dDvwO5JWAFNduG3wp3ZZKb1LK+c9TAfQQZVch5Hyscj/pBJT5070wsWuKw36ifNtKVVWo7lKZ7J5AUshjqyDWZvIGfCIPOcxbXyKKreHIPi6Z3qJRQoE2ChZIMEBxMfK9000HrRDIrHuZPqU29eUI3SA7q9g+f8ZiYtOfe+3boWLVjqL2APjj05IJFOEuBnEQy4PPZ4JEJunITPDh0ZVAuq65BrQCfQwEvo5MpWYXbueYDr/6M7FF9NKMSXI+rFoTBa6vcXA+fWdG51ZPHSd+9PYLGTIX8dvNrNxukpTVxtwiaI+hTyD7NnvO+XAfFPQfa0cmGhlWvif3m6uj+0G7fS8dZCqX4vbQ76nmwfRBgrDciJ/kcYEf88wx4uU=
    - secure: RDhUsl/rFjv1u1X6WrQcX84hubiUUoQf80C+9v0WZZ0na1Fbnc9vEF4b0VBezonjjQDoA+DtLlmYMNfDsvisREWuCQNEyr2CivwuHqCfzoYziZGabrd88qPd4N1Fa2iFZbqq3UWzLDv3q266bYaTte/r1qzwzSiCYMV/4EnKawqYRS0GDjmL74dTrlHdASQhJP0i//vkYVgUh3JpePqP1JIxfkt6oivAGvRj4DifZLeeyHhogSdNEpEC2w6SneBbh3UBsOotx49Vu/NOlAWMu1d1bj49ksjKZ9PYybzeiGZdXehVcQNK97dh0Jl1my1IoouxlkEQMRisuZhmVZTDfxts5aNp1xdZLtFZNVCE9YNcRzVYkZIzEyBnVeEvVm6/ki26cW0ET9XR7LOP7eKP/OoLYhuDU1j7Qgi0i4fxP/O1dDZuC1PhMK1O8CcII9nniIkVdXQ/plxHz4VrGErLQmXb9IyncnaCjau+07B5jFPRYYsBMVhE8cD6Ioy6qMHR/zkJveBJd2QLzi1PEhhf/D/yM/rgeimoSBZeqa/OYDs6HWHiwdj2obZbMqHfQqxzBzYafHd01WGytuBxBDzTAkna3OVj3t+FlLi94ijwWYZtMcKJyMm4uLFseiCvqFsZsYw6QMoTegXgu9VsU/HS9LTGK4acInuPaEIR3xYW168=

install: mvn install -P !build-extras -DskipTests=true -Dmaven.javadoc.skip=true -B -V

before_script:
 - openssl aes-256-cbc -K $encrypted_dc48ef620fc5_key -iv $encrypted_dc48ef620fc5_iv -in codesigning/codesigning.asc.enc -out codesigning/codesigning.asc -d
 - gpg --fast-import codesigning/codesigning.asc

script: 
 - mvn test -P !build-extras -B
 - if [ $TRAVIS_TEST_RESULT -eq 0 ]; then
      mvn deploy -P sign,build-extras --settings codesigning/mvnsettings.xml;
   fi
